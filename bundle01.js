!function(e){function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}var t={};n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=15)}([function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n/*\n * AudioTool adapted from Gael Hugo.\n * It searches through the audio and video elements of the existing page\n * and attaches an AnalyserNode to it.\n */\n\nvar AudioTool = function AudioTool(mp3) {\n  this.soundURL = mp3 || null;\n  this.audioContext = null;\n  this.audio = null;\n  this.isPlaying = false;\n  // MIC stuff\n  this.stream = null;\n  this.analyserNode = null;\n  this.data = [];\n  this.dataWave = [];\n  this.size = 2048;\n  this.counter = 0;\n  this.setup();\n};\n\nAudioTool.prototype = {\n\n  isAudioContextSupported: function isAudioContextSupported() {\n    window.AudioContext = window.AudioContext || window.webkitAudioContext;\n    if (window.AudioContext) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  setup: function setup() {\n    if (this.isAudioContextSupported()) {\n      this.audioContext = new AudioContext();\n      // Setup audio stuff\n      this.update(this.soundURL);\n    } else {\n      alert("this browser doesn\'t support the Web Audio API. Come on...");\n    }\n  },\n\n  update: function update(url) {\n\n    this.mic = null;\n    // console.log(document.getElementsByTagName("audio"));\n    this.audio = document.getElementsByTagName("audio")[0];\n    if (this.audio) {\n      this.broadcast();\n    } else {\n      console.log("No audio element");\n      console.log(document.getElementsByTagName("video"));\n      this.audio = document.getElementsByTagName("video")[0];\n      if (this.audio) {\n        this.broadcast();\n      } else {\n        console.log("No video element");\n      }\n    }\n  },\n\n  broadcast: function broadcast() {\n    if (!this.source) {\n      this.source = this.audioContext.createMediaElementSource(this.audio);\n    }\n    this.analyserNode = this.audioContext.createAnalyser();\n    this.analyserNode.fftSize = this.size;\n    this.source.connect(this.analyserNode);\n    this.analyserNode.connect(this.audioContext.destination);\n    this.data = new Uint8Array(this.analyserNode.frequencyBinCount);\n    this.dataWave = new Uint8Array(this.analyserNode.frequencyBinCount);\n  },\n\n  onStream: function onStream(stream) {\n    this.stream = stream;\n    this.mic = this.audioContext.createMediaStreamSource(stream);\n    this.analyserNode = this.audioContext.createAnalyser();\n    this.analyserNode.fftSize = this.size;\n    this.mic.connect(this.analyserNode);\n    // two kind of analysis\n    this.data = new Uint8Array(this.analyserNode.frequencyBinCount);\n    this.dataWave = new Uint8Array(this.analyserNode.frequencyBinCount);\n  },\n\n  noStream: function noStream() {\n    alert("problem with mic");\n  },\n\n  updateFrequency: function updateFrequency() {\n    if (this.analyserNode) {\n      this.analyserNode.getByteFrequencyData(this.data);\n    }\n  },\n\n  updateWave: function updateWave() {\n    if (this.analyserNode) {\n      this.analyserNode.getByteTimeDomainData(this.dataWave);\n    }\n  }\n};\n\nexports.default = AudioTool;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/AudioTool.js\n// module id = 0\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/AudioTool.js?')},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar _App = __webpack_require__(2);\n\nvar _App2 = _interopRequireDefault(_App);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// === Start the App ===\nnew _App2.default();\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.js\n// module id = 1\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/index.js?")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _AudioTool = __webpack_require__(0);\n\nvar _AudioTool2 = _interopRequireDefault(_AudioTool);\n\nvar _FontSizeEffector = __webpack_require__(5);\n\nvar _FontSizeEffector2 = _interopRequireDefault(_FontSizeEffector);\n\nvar _VideoFragmentsEffector = __webpack_require__(12);\n\nvar _VideoFragmentsEffector2 = _interopRequireDefault(_VideoFragmentsEffector);\n\nvar _VideoOverlayEffector = __webpack_require__(13);\n\nvar _VideoOverlayEffector2 = _interopRequireDefault(_VideoOverlayEffector);\n\nvar _TransformEffector = __webpack_require__(10);\n\nvar _TransformEffector2 = _interopRequireDefault(_TransformEffector);\n\nvar _ToggleEffector = __webpack_require__(9);\n\nvar _ToggleEffector2 = _interopRequireDefault(_ToggleEffector);\n\nvar _CounterEffector = __webpack_require__(4);\n\nvar _CounterEffector2 = _interopRequireDefault(_CounterEffector);\n\nvar _ZIndexEffector = __webpack_require__(14);\n\nvar _ZIndexEffector2 = _interopRequireDefault(_ZIndexEffector);\n\nvar _OpacityEffector = __webpack_require__(6);\n\nvar _OpacityEffector2 = _interopRequireDefault(_OpacityEffector);\n\nvar _TitleMessageEffector = __webpack_require__(8);\n\nvar _TitleMessageEffector2 = _interopRequireDefault(_TitleMessageEffector);\n\nvar _TriangleDrawer = __webpack_require__(11);\n\nvar _TriangleDrawer2 = _interopRequireDefault(_TriangleDrawer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n__webpack_require__(3);\n\n\n/*\n* The App is responsible for managing the lifecycle and the interaction\n* between AudioTool and the visual side.\n*/\nvar App = function App() {\n  console.log("App running");\n  this.tool = null;\n  this.ctx = null;\n  this.isMic = false;\n  this.bandCount = 32;\n  this.doEndVideo = true;\n\n  this.effectors = [];\n  this.zIndexes = [];\n\n  this.tool = new _AudioTool2.default();\n  this.tool.setupBeatDetector(this.bandCount, 1.05);\n\n  this.video = document.getElementsByTagName("video")[0];\n\n  // === Overlay Canvas ===\n  this.canvas = document.createElement("canvas");\n  this.canvas.width = window.innerWidth;\n  this.canvas.height = window.innerHeight;\n  this.canvas.style.display = "block";\n  this.canvas.style.position = "absolute";\n  this.canvas.style.left = "0px";\n  this.canvas.style.top = "0px";\n  this.canvas.style.zIndex = "600000000000000";\n  this.canvas.style.pointerEvents = "none";\n  // this.canvas.style.mixBlendMode = "difference";\n  document.body.appendChild(this.canvas);\n  this.ctx = this.canvas.getContext("2d");\n  this.ctx.rect(0, 0, window.innerWidth, window.innerHeight);\n  this.ctx.fillStyle = "white";\n  // this.ctx.fill();\n\n  // === Background Div ===\n  this.bg = document.createElement("div");\n  this.bg.style.width = "100%";\n  this.bg.style.height = "100%";\n  this.bg.style.display = "block";\n  this.bg.style.position = "fixed";\n  this.bg.style.left = "0px";\n  this.bg.style.top = "0px";\n  this.bg.style.zIndex = "-10";\n  this.bg.style.background = "white";\n  this.bg.style.opacity = 0;\n  document.body.appendChild(this.bg);\n\n  this.setup();\n  this.draw();\n};\n\nApp.prototype = {\n  setup: function setup() {\n    var i = 0;\n    // this.findAllZIndexes();\n    addEventListener("keydown", this.onKeyDown.bind(this));\n    this.hideYoutubeStuff();\n\n    // === Typer ===\n    this.eff_titleMessage = new _TitleMessageEffector2.default(document.querySelector("#container > h1"), "Oh !    I see you\'re listening some music.       Well,  let\'s get started.");\n    this.effectors.push(this.eff_titleMessage);\n\n    // === View Count ===\n    // document.getElementById("watch7-views-info").firstChild,\n    this.eff_fontSizeViews = new _FontSizeEffector2.default(document.querySelector("span.view-count.style-scope.yt-view-count-renderer"), 1, 0.15);\n    // Fix clipping on the new YT version\n    document.getElementById("info-text").style.overflow = "visible";\n    this.eff_counterViews = new _CounterEffector2.default(document.querySelector("span.view-count.style-scope.yt-view-count-renderer"), 1, 100);\n    this.effectors.push(this.eff_fontSizeViews);\n    this.effectors.push(this.eff_counterViews);\n    // this.effectors.push(new FontSizeEffector(document.getElementById("eow-title"), 1, 0.2));\n    // this.effectors.push(new CounterEffector(document.getElementsByClassName("like-button-renderer-like-button")[0].firstChild, 0, 10));\n\n    // === Boom Cards ===\n    var subscribeButton = document.getElementById("subscribe-button");\n    var pn = subscribeButton.parentNode;\n    while (pn && pn.style) {\n      pn.style.overflow = "visible";\n      pn = pn.parentNode;\n    }\n    this.eff_subscribeBoom = new _TransformEffector2.default(subscribeButton, 0, 0.09, {\n      sx: 0.008,\n      sy: 0.008\n    });\n    this.effs_boomCards = [];\n    var cards = []; //Array.from(document.getElementsByClassName("yt-card"));\n    // cards.push(document.getElementById("action-panel-details"));\n    // cards.push(document.getElementById("watch-header"));\n    // cards.push(document.getElementById("player-api"));\n    cards.push(document.getElementById("meta-contents"));\n    cards.push(document.getElementById("info-contents"));\n    // cards.push(document.getElementById("player"));\n\n    // document.getElementById("watch7-sidebar-modules").style.zIndex = -1;\n    // document.getElementById("watch7-sidebar").style.zIndex = -1;\n    for (i = 0; i < cards.length; i++) {\n      var rect = cards[i].getBoundingClientRect();\n      cards[i].style.zIndex = 2147483600 + i;\n      // cards[i].style.transformOrigin = ( // center the transform on the video\n      //   (rect.left + rect.width / 2) + "px " +\n      //   (rect.top + rect.height / 2) + "px "\n      // );\n      this.effs_boomCards.push(new _TransformEffector2.default(cards[i], 0, 0.09, {\n        sx: 0.0002 / (rect.height / 600),\n        sy: 0.0002 / (rect.height / 600)\n      }));\n    }\n    this.effectors.push(this.eff_subscribeBoom);\n    for (i = 0; i < this.effs_boomCards.length; i++) {\n      this.effectors.push(this.effs_boomCards[i]);\n    }\n\n    console.log("v01");\n    // === COMMENTS ===\n    var watchDiscussion = document.getElementById("comments");\n    if (watchDiscussion) {\n      watchDiscussion.parentNode.style.perspective = "500px";\n      watchDiscussion.parentNode.style.perspectiveOrigin = "50% 0%";\n\n      this.eff_comments = new _TransformEffector2.default(watchDiscussion, 2, 0.07, {\n        y: -1.8,\n        rx: -0.015\n      });\n      this.effectors.push(this.eff_comments);\n    }\n    this.eff_comments.enabled = true;\n\n    // === Side Equalizer ===\n    this.effs_eq = [];\n    var list = document.getElementById("items").children;\n    for (i = 0; i < list.length; i++) {\n      // list[i].style.zIndex = -i;\n      this.effs_eq.push(new _TransformEffector2.default(list[i], Math.min(i, this.bandCount - 1), 0.08, {\n        x: 2.1\n      }));\n      // this.effs_eq[this.effs_eq.length - 1].originals.x = -50;\n    }\n    for (i = 0; i < this.effs_eq.length; i++) {\n      this.effectors.push(this.effs_eq[i]);\n    }\n\n    // === Video Overlay Effect ===\n    /*\n    this.eff_overlay = new VideoOverlayEffector(this.video, 1, 3 * 1 / 255);\n    this.eff_overlayTransform = new TransformEffector(\n      this.eff_overlay.canvas,\n      0,\n      0.03,\n      {\n        x: 0.03,\n        y: 0.03,\n        // rx : 0.5,\n        // ry : 0.4,\n        // rz : -0.3,\n        sx: 0.0005,\n        sy: 0.0005,\n      }\n    );\n    this.effectors.push(this.eff_overlay);\n    this.effectors.push(this.eff_overlayTransform);\n    */\n    // this.effectors.push(new ToggleEffector(0, 148, 6,\n    //   overlayEffector.ctx, "filter", "blur(0px)", "blur(12px) brightness(120%)"));\n    // this.effectors.push(new ToggleEffector(0, 148, 6,\n    //   overlayEffector, "affectAlpha", true, false));\n    // this.effectors.push(new ToggleEffector(0, 148, 6,\n    //   overlayEffector.canvas.style, "mixBlendMode", "color-dodge", "difference"));\n\n    // for (i = 0; i < 3; i++) {\n    //   this.effectors[this.effectors.length - i - 1].lock(true);\n    // }\n\n    // === Navbar Transform ===\n    var navbar = document.getElementById("masthead-container");\n    navbar.style.overflow = "visible";\n    navbar.style.zIndex = 100000000 + 100 + 1;\n    this.eff_navbarTransform = new _TransformEffector2.default(navbar, 7, 0.15, {\n      // x: 0.03,\n      // y: 0.13,\n      rx: 1.5\n    });\n    // searchbar.parent.style.overflow\n    // var searchbar = document.getElementById("masthead-search-terms");\n    // searchbar.style.zIndex = 100000000 + 100 + 2;\n    // this.eff_searchbarTransform = new TransformEffector(searchbar, 1, 0.03, {\n    //   // x: 0.03,\n    //   y: 0.23,\n    // rx : 3,\n    // // ry : 0.9,\n    // // rz : -0.3,\n    // // sx: 0.0005,\n    // // sy: 0.0005,\n    // });\n    this.effectors.push(this.eff_navbarTransform);\n    // this.effectors.push(this.eff_searchbarTransform);\n\n    // === Triangle ===\n    this.eff_triangle = new _TriangleDrawer2.default(this.canvas, 6);\n    this.effectors.push(this.eff_triangle);\n\n    this.effs_triangles = [];\n    var triangles_positions = [[410, 441, false], [574, 196, false], [115, 380, true], [826, -17, false], [377, 179, false], [-317, -59, true], [675, 592, false], [816, 113, true], [89, 47, false], [366, 652, false], [-250, 475, false], [575, -166, true], [626, 112, false], [-261, 298, true], [838, 654, false], [192, 490, true], [304, 595, true]];\n    for (i = 0; i < 16; i++) {\n      var t = new _TriangleDrawer2.default(this.canvas, i % this.bandCount);\n      t.enabled = false;\n      t.isCentered = false;\n      t.original = 0;\n      t.factor = 0.3 + i / 15;\n      t.doMirror = triangles_positions[i][2];\n      // t.xOffset = triangles_positions[i][0];\n      // t.yOffset = triangles_positions[i][1];\n      this.effs_triangles.push(t);\n      this.effectors.push(t);\n    }\n\n    this.eff_bgFlash = new _OpacityEffector2.default(this.bg, 3);\n    this.effectors.push(this.eff_bgFlash);\n\n    // this.effectors.push(new ZIndexEffector(canvas, 0, this.zIndexes));\n    // this.effectors.push(new OpacityEffector(canvas, 0));\n\n    // === Video Fragments ===\n    // this.effectors.push(new VideoFragmentsEffector(document.getElementsByTagName("video")[0], 5));\n\n    // === Comment ===\n\n    var launchOnStart = true;\n    if (launchOnStart) {\n      this.toggle(this.eff_fontSizeViews);\n      this.toggle(this.eff_counterViews);\n      this.toggle(this.eff_subscribeBoom);\n      for (i = 0; i < this.effs_boomCards.length; i++) {\n        this.toggle(this.effs_boomCards[i]);\n      }\n      // this.toggle(this.eff_overlay);\n      // this.toggle(this.eff_overlayTransform);\n      for (i = 0; i < this.effs_eq.length; i++) {\n        this.toggle(this.effs_eq[i]);\n      }\n      this.hideYoutubeStuff();\n      this.toggle(this.eff_navbarTransform);\n      // this.toggle(this.eff_triangle);\n      // this.eff_triangle.factor = 1.3;\n      // this.eff_triangle.containedInVideo = false;\n      // for (i = 0; i < this.effs_triangles.length; i++) {\n      //   this.toggle(this.effs_triangles[i]);\n      // }\n    }\n\n    // Hide Ads\n    var sheet = window.document.styleSheets[0];\n    sheet.insertRule(".ytd-iframe-companion-renderer { display: none; }", sheet.cssRules.length);\n    sheet.insertRule(".ad-container { display: none; }", sheet.cssRules.length);\n    sheet.insertRule("#player-ads { display: none; }", sheet.cssRules.length);\n  },\n\n  findAllZIndexes: function findAllZIndexes() {\n    var elements = document.getElementsByTagName("*");\n    var tmp_zIndexes = {};\n\n    // Get all zIndexes as key of an object to avoid duplicates\n    for (var i = 0; i < elements.length; i++) {\n      var zIndex = getComputedStyle(elements[i]).zIndex;\n      tmp_zIndexes[String(zIndex)] = true;\n    }\n    // Convert it to a sorted array.\n    for (var key in tmp_zIndexes) {\n      if (tmp_zIndexes.hasOwnProperty(key) && !isNaN(key)) {\n        this.zIndexes.push(parseInt(key));\n      }\n    }\n    this.zIndexes.sort(function (a, b) {\n      return a - b;\n    });\n    console.log(this.zIndexes);\n  },\n\n  hideYoutubeStuff: function hideYoutubeStuff() {\n    // Hide a few elements that YouTube hide behind the navbar\n    // document.getElementById("a11y-skip-nav").style.display = "none";\n    // document.getElementById("a11y-announcements-message").style.display = "none";\n  },\n\n  draw: function draw() {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n    if (this.tool) {\n      this.tool.updateFrequency();\n      this.tool.updateWave();\n      this.tool.analyzeBeats();\n\n      if (this.tool.data) {\n        for (var i = 0; i < this.effectors.length; i++) {\n          if (this.effectors[i].enabled) {\n            this.effectors[i].update(this.tool.dataBeat, this.tool.dataBands);\n          }\n        }\n      }\n    }\n\n    if (window.location.href.indexOf("44XYEeD1A1U") > -1) {\n      this.doTNT();\n    }\n\n    // Refresh loop\n    requestAnimationFrame(this.draw.bind(this));\n  },\n\n  doTNT: function doTNT() {\n    if (!this.video) return;\n    var i = 0;\n    var t = this.video.currentTime;\n\n    this.eff_titleMessage.enabled = t > 3.5 && t < 12;\n    this.eff_fontSizeViews.enabled = t > 6.8;\n    this.eff_counterViews.enabled = t > 6.8;\n\n    for (i = 0; i < this.effs_boomCards.length; i++) {\n      this.effs_boomCards[i].enabled = t > 10.5;\n    }\n    this.eff_subscribeBoom.enabled = t > 10.5;\n\n    this.eff_overlay.enabled = t > 18;\n    this.eff_overlayTransform.enabled = t > 18;\n\n    for (i = 0; i < this.effs_eq.length; i++) {\n      this.effs_eq[i].enabled = t > 18;\n    }\n\n    this.eff_comments.enabled = t > 22.5;\n\n    this.eff_navbarTransform.enabled = t > 25;\n    // this.eff_searchbarTransform.enabled = (t > 25);\n\n    this.eff_bgFlash.enabled = t > 33 && t < 57;\n\n    this.eff_triangle.enabled = t > 44.4;\n    this.eff_triangle.containedInVideo = t < 57;\n    this.eff_triangle.factor = t < 57 ? 0.8 : 1.4;\n\n    this.triangles_popTimes = [60.886641, 61.214641, 61.653873, 64.465307, 64.886641, 65.304431, 67.766641, 68.54265, 69.006641];\n    for (i = 0; i < this.effs_triangles.length; i++) {\n      this.effs_triangles[i].enabled = t > this.triangles_popTimes[~~(i / 2) % this.triangles_popTimes.length];\n    }\n    // 60.886641 +33\n    // 61.214641 +44\n    // 61.653873 +2.8\n    // 64.465307 +42\n    // 64.886641 +42\n    // 65.304431 +2.8\n    // 68.100000 +44\n    // 68.54265  +46\n    // 69.006641\n\n    if (this.doEndVideo) {\n      if (73 < t && t < 74) {\n        this.video.currentTime = this.video.duration - 0.1;\n      }\n\n      // Volume fade\n      var fadeDuration = 2.2;\n      var fadeStart = 70.5;\n      if (fadeStart < t && t < fadeStart + fadeDuration) {\n        this.video.volume = Math.max(0, 1 - (t - fadeStart) / fadeDuration);\n      } else if (t < fadeStart) {\n        this.video.volume = 1;\n      }\n\n      // Hide the background preview after the video\n      if (73 < t) {\n        if (!this.otherImages) {\n          // Get a live NodeList so that\n          this.otherImages = document.getElementsByClassName("ytp-thumbnail-overlay-image");\n        }\n        for (i = 0; i < this.otherImages.length; i++) {\n          if (this.otherImages[i].style.filter !== "brightness(0%)") {\n            this.otherImages[i].style.filter = "brightness(0%)";\n          }\n        }\n      }\n\n      // Hide the share panel at the end of the video.\n      if (100 < t && !this.didDismissShare) {\n        this.didDismissShare = true;\n        // document.getElementById("action-panel-dismiss").click();\n        for (i = 1; i < 20; i++) {\n          window.setTimeout(this.hideSharePanel, 50 * i);\n        }\n      }\n\n      // Hide the thumbnails one after another\n      if (72 < t && !this.images) {\n        this.images = Array.prototype.slice.call(document.getElementsByTagName("img"));\n        this.images.push(document.getElementById("subscribe-button"));\n        this.images.push(document.getElementById("logo-icon-container"));\n        // Kick out images that are too small\n        for (i = this.images.length - 1; i >= 0; i--) {\n          if (this.images[i].width < 47) {\n            this.images.splice(i, 1);\n          }\n        }\n        // Shuffle the images\n        shuffle(this.images);\n\n        this.images.splice(~~(0.6 * this.images.length), 0, document.getElementById("meta-contents"));\n        this.images.splice(~~(0.8 * this.images.length), 0, document.getElementById("info-contents"));\n        // this.images.splice(\n        //   ~~(0.92 * this.images.length),\n        //   0,\n        //   document.getElementById("watch7-sidebar")\n        // );\n        this.images.splice(~~(0.96 * this.images.length), 0, document.getElementById("masthead-container"));\n        this.images.splice(~~(0.99 * this.images.length), 0, document.getElementById("sections"));\n\n        for (i = 0; i < this.images.length; i++) {\n          window.setTimeout(function () {\n            this.style.filter = "brightness(0%)";\n          }.bind(this.images[i]), 4000 * i / this.images.length);\n        }\n        window.setTimeout(function () {\n          document.body.style.background = "black";\n          this.bg.style.background = "black";\n          this.bg.style.opacity = 1;\n        }.bind(this), 4400);\n      }\n    }\n  },\n\n  onKeyDown: function onKeyDown(e) {\n    var i = 0;\n    switch (e.keyCode) {\n      case 81:\n        // Q\n        // Attemp to write a comment :\n        // var p = document.getElementsByClassName("comment-simplebox-text")[0],\n        //   s = window.getSelection(),\n        //   r = document.createRange();\n        // p.innerHTML = \'\\u00a0\';\n        // r.selectNodeContents(p);\n        // s.removeAllRanges();\n        // s.addRange(r);\n        // document.execCommand(\'delete\', false, null);\n        // document.getElementsByClassName("comment-simplebox-text")[0].innerText = "I just Broke The YouTube.";\n        // var submitButton = document.getElementsByClassName("comment-simplebox-submit")[0];\n        // submitButton.disabled = false;\n        // submitButton.click();\n\n        this.toggle(this.eff_fontSizeViews);\n        this.toggle(this.eff_counterViews);\n        break;\n\n      case 87:\n        // W\n        this.toggle(this.eff_subscribeBoom);\n        for (i = 0; i < this.effs_boomCards.length; i++) {\n          this.toggle(this.effs_boomCards[i]);\n        }break;\n\n      case 69:\n        // E\n        this.toggle(this.eff_overlay);\n        this.toggle(this.eff_overlayTransform);\n        for (i = 0; i < this.effs_eq.length; i++) {\n          this.toggle(this.effs_eq[i]);\n        }\n        break;\n\n      case 72:\n        // H\n        this.hideYoutubeStuff();\n        break;\n\n      case 82:\n        // R\n        this.toggle(this.eff_navbarTransform);\n        // this.toggle(this.eff_searchbarTransform);\n        break;\n\n      case 84:\n        // T\n        this.toggle(this.eff_triangle);\n        this.eff_triangle.factor = 1.3;\n        this.eff_triangle.containedInVideo = false;\n        break;\n\n      case 90:\n        // Z\n        for (i = 0; i < this.effs_triangles.length; i++) {\n          this.toggle(this.effs_triangles[i]);\n        }\n        break;\n\n      case 85:\n        // U -> don\'t do scenario end\n        console.log("Won\'t do end of the scenario");\n        this.doEndVideo = false;\n        break;\n\n      case 83:\n        // S\n        this.tool.toggleBeatDetection();\n        break;\n      case 65:\n        // A\n        this.tool.adjustThreshold(-0.1);\n        break;\n      case 68:\n        // D\n        this.tool.adjustThreshold(0.1);\n        break;\n    }\n  },\n\n  toggle: function toggle(effector) {\n    effector.enabled = !effector.enabled;\n  },\n\n  hideSharePanel: function hideSharePanel() {\n    // document.getElementById("watch-action-panels").style.display = "none";\n  }\n};\n\nfunction shuffle(array) {\n  var currentIndex = array.length,\n      temporaryValue,\n      randomIndex;\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n\n    // And swap it with the current element.\n    temporaryValue = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temporaryValue;\n  }\n\n  return array;\n}\n\nexports.default = App;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.js\n// module id = 2\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/App.js?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar _AudioTool = __webpack_require__(0);\n\nvar _AudioTool2 = _interopRequireDefault(_AudioTool);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\'use strict\';\n\n/**\n * USAGE :\n *\n * Just after the line with  "new AudioTool()", put the following line :\n *      this.tool.setupBeatDetector(subbandCount, initialThreshold);\n * And replace :\n *       subbandCount with a number that will be the power of 2 ideally,\n *       and initialThreshold a value around 1-3\n *\n * Just after the line with "this.tool.updateFrequency()", put the following line :\n *      this.tool.analyzeBeats();\n * After that :\n *      this.tool.dataBeat will then be available as an array of length subbandCount\n *          each band will contain 0\n *          or the last average sample value for the band if a peak (beat) was detected.\n *      this.tool.dataBands will also be available. It works just like dataBeat,\n *          but contains the average value for the band even if no beat was detected.\n *\n */\n\n/**\n * CONTROL SNIPPET for onKeyDown :\n  case 65: // A\n   this.tool.toggleBeatDetection();\n   break;\n case 37: // ArrowLeft\n   this.tool.adjustThreshold(-0.1);\n   break;\n case 39: // ArrowRight\n   this.tool.adjustThreshold(0.1);\n   break;\n*/\n\n_AudioTool2.default.prototype.setupBeatDetector = function (subbandCount, initialThreshold) {\n  this.bandcount = subbandCount;\n  this.threshold = initialThreshold;\n  this.history_maxsize = 10;\n  this.sampleSize = 2048;\n  this.e_history = [];\n  this.local_total = [];\n  this.dataBeat = [];\n  this.dataBands = [];\n  this.doFilterBeats = true;\n\n  for (var i = 0; i < this.bandcount; i++) {\n    this.local_total[i] = 0;\n  }\n  for (var _i = 0; _i < this.bandcount; _i++) {\n    this.dataBeat.push(0);\n  }\n\n  this.bandwidthes = [];\n  var amount = this.sampleSize / this.bandcount;\n\n  for (var _i2 = 0; _i2 < this.bandcount; _i2++) {\n    this.bandwidthes.push(amount);\n  }\n\n  // TODO : séparation ~exponentielle pour mieux séparer les basses.\n  // this.bandwidthes = [8,14,20,26,32,36,38,40,42,44,46,48,50,52,54,56,58,60,66,72,78,80];\n  // console.log(this.bandwidthes);\n};\n\n_AudioTool2.default.prototype.dequeueFromHistory = function () {\n  // Remove the oldest present value from the history queue\n  var old_es = this.e_history.shift();\n\n  // Adjust the local total accordingly for each band\n  for (var i = 0; i < this.bandcount; i++) {\n    this.local_total[i] -= old_es[i];\n  }\n};\n\n_AudioTool2.default.prototype.toggleBeatDetection = function () {\n  this.doFilterBeats = !this.doFilterBeats;\n  console.log("Turning beat detection " + (this.doFilterBeats ? "on" : "off"));\n};\n\n_AudioTool2.default.prototype.adjustThreshold = function (adjustement) {\n  this.threshold += adjustement;\n  console.log("Set threshold to : " + this.threshold);\n};\n\n_AudioTool2.default.prototype.analyzeBeats = function () {\n\n  var samplesI = 0;\n  // Energy of subband\n  this.dataBands = [];\n  for (var i = 0; i < this.bandcount; i++) {\n    // add the corresponding samples\n    // TODO : 1024 to 2048\n    var aggregated = 0;\n    for (var j = 0; j < this.bandwidthes[i]; j++) {\n      aggregated += this.data[samplesI];\n      samplesI++;\n    }\n    // finalize the computation of the band energy\n    // by dividing by the number of elements added\n    this.dataBands.push(aggregated / this.bandwidthes[i]);\n    // es.push(aggregated);\n  }\n\n  // finalize the computation of the band energy\n  // by dividing by the number of elements added\n  // for (let i = 0; i < this.bandcount; i++) {\n  //   // this.dataBands[i] *= (this.bandwidthes[i]/this.sampleSize);\n  //   this.dataBands[i] /= (this.bandwidthes[i]);\n  // }\n\n  for (var _i3 = 0; _i3 < this.bandcount; _i3++) {\n    this.local_total[_i3] += this.dataBands[_i3];\n  }\n  this.e_history.push(this.dataBands);\n\n  if (this.e_history.length > this.history_maxsize) {\n    this.dequeueFromHistory();\n  }\n\n  // Actually filters beat\n  for (var _i4 = 0; _i4 < this.bandcount; _i4++) {\n    if (this.dataBands[_i4] > this.threshold * this.local_total[_i4] / this.e_history.length || !this.doFilterBeats) {\n      this.dataBeat[_i4] = this.dataBands[_i4];\n    } else {\n      this.dataBeat[_i4] = 0;\n    }\n  }\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/AudioBeatTool.js\n// module id = 3\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/AudioBeatTool.js?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar CounterEffector = function CounterEffector(element, bandIndex, factor) {\n  this.enabled = false;\n  this.element = element;\n  this.bandIndex = bandIndex;\n  this.factor = factor || 0.2;\n\n  var words = element.textContent.split(/\\s/);\n  var lastWord = words[words.length - 1];\n  this.suffix = "";\n  // If the last word contains letter (french view numbers have spaces)\n  if (lastWord.match(/[a-z]/i)) {\n    this.suffix = " " + lastWord;\n  }\n  this.speed = 0.3;\n  this.original = parseInt(element.textContent.replace(/_|\\s|,/g, \'\'));\n  this.goal = this.original;\n  this.currentValue = this.original;\n\n  // this.tn = document.createTextNode("");\n  // while(this.element.firstChild){\n  //   this.element.removeChild(this.element.firstChild);\n  // }\n  // this.element.appendChild(this.tn);\n};\n\nCounterEffector.prototype = {\n  update: function update(data) {\n    // On a new data (beat or regular)\n    if (data[this.bandIndex] && data[this.bandIndex] > 0) {\n      this.goal += this.factor * data[this.bandIndex];\n    }\n    this.currentValue += (this.goal - this.currentValue) * this.speed;\n    var str = (~~this.currentValue).toLocaleString().concat(this.suffix);\n    // Use innerText or innerHTML or textContent ?\n    // textContent should be faster, but still takes a huge amount of time !\n    // TODO : improve performance\n    // Best solution seems to use .firstChild.data\n    // See here : https://stackoverflow.com/a/6178802/1017472\n    this.element.firstChild.data = str;\n    // this.tn.nodeValue = str;\n  }\n\n};\n\nexports.default = CounterEffector;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/CounterEffector.js\n// module id = 4\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/CounterEffector.js?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar FontSizeEffector = function FontSizeEffector(element, bandIndex, factor) {\n  this.enabled = false;\n  this.element = element;\n  this.bandIndex = bandIndex;\n  this.factor = factor || 0.2;\n\n  this.speed = 0.1;\n  this.original = parseFloat(window.getComputedStyle(this.element, null).getPropertyValue(\'font-size\'));\n  this.currentValue = this.original;\n};\n\nFontSizeEffector.prototype = {\n  update: function update(data) {\n    // On a new data (beat or regular)\n    if (data[this.bandIndex] && data[this.bandIndex] > 0) {\n      this.currentValue = this.original + this.factor * data[this.bandIndex];\n    }\n    // Update the UI\n    this.element.style.fontSize = this.currentValue + "px";\n    // The size is always falling back to it\'s original value\n    this.currentValue -= (this.currentValue - this.original) * this.speed;\n  }\n};\n\nexports.default = FontSizeEffector;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/FontSizeEffector.js\n// module id = 5\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/FontSizeEffector.js?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar OpacityEffector = function OpacityEffector(element, bandIndex, factor) {\n  this.enabled = false;\n  this.element = element;\n  this.bandIndex = bandIndex;\n  this.factor = factor || 0.1;\n\n  this.speed = 0.13;\n  this.original = 0;\n  this.currentValue = this.original;\n};\n\nOpacityEffector.prototype = {\n  update: function update(data) {\n    // On a new data (beat or regular)\n    if (data[this.bandIndex] && data[this.bandIndex] > 0) {\n      this.currentValue = 1; //Math.min(1, this.original + this.factor * data[this.bandIndex]);\n    }\n    // console.log(this.currentValue);\n    // Update the UI\n    this.element.style.opacity = this.currentValue;\n    // The size is always falling back to it\'s original value\n    this.currentValue -= (this.currentValue - this.original) * this.speed;\n    if (this.currentValue < this.original + 0.01) {\n      this.currentValue = this.original;\n    }\n  }\n};\n\nexports.default = OpacityEffector;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/OpacityEffector.js\n// module id = 6\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/OpacityEffector.js?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar StringTyper = function StringTyper(str) {\n  this.str = str;\n  this.index = 0;\n  this.out = "";\n  this.done = false;\n  this.frameCount = 0;\n};\n\nStringTyper.prototype = {\n  update: function update() {\n    if (!this.done) {\n      this.frameCount += 1;\n      if (this.frameCount % 2 === 0) {\n        if (!(this.str[this.index] === \' \' && /\\s+$/.test(this.out))) {\n          this.out += this.str.charAt(this.index);\n        }\n        this.index += 1;\n        if (this.index >= this.str.length) {\n          this.done = true;\n        }\n      }\n    }\n    return this.out;\n  }\n};\n\nexports.default = StringTyper;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/StringTyper.js\n// module id = 7\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/StringTyper.js?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _StringTyper = __webpack_require__(7);\n\nvar _StringTyper2 = _interopRequireDefault(_StringTyper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar TitleMessageEffector = function TitleMessageEffector(element, str) {\n  this.enabled = false;\n  this.element = element;\n  this.str = str;\n  this.time = 0;\n  this.done = false;\n  this.typer = new _StringTyper2.default(str);\n};\n\nTitleMessageEffector.prototype = {\n  update: function update(data) {\n    this.time += 1;\n    this.element.firstChild.data = this.typer.update();\n    this.done = this.typer.done;\n  }\n};\n\nexports.default = TitleMessageEffector;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/TitleMessageEffector.js\n// module id = 8\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/TitleMessageEffector.js?')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ToggleEffector = function ToggleEffector(bandIndex, minimumEnergy, speed, object, property, value1, value2) {\n  this.enabled = false;\n  this.object = object;\n  this.property = property;\n  this.value1 = value1;\n  this.value2 = value2;\n  this.bandIndex = bandIndex;\n  this.minimumEnergy = minimumEnergy;\n  this.speed = speed;\n\n  this.original = 100;\n  this.currentValue = 0;\n  this.toggled = false;\n\n  this.locked = false;\n};\n\nToggleEffector.prototype = {\n\n  lock: function lock(on) {\n    this.locked = on;\n    this.currentValue = on ? 100 : 0;\n    this.toggled = on;\n    this.object[this.property] = on ? this.value2 : this.value1;\n  },\n\n  unlock: function unlock() {\n    this.locked = false;\n  },\n\n  update: function update(data) {\n    if (this.locked) return;\n\n    if (this.currentValue >= 0) {\n      this.currentValue -= this.speed;\n    }\n    // On a new data (beat or regular)\n    if (data[this.bandIndex] && data[this.bandIndex] > this.minimumEnergy && !this.toggled) {\n      this.currentValue = 100;\n      this.toggled = true;\n      this.object[this.property] = this.value2;\n    }\n\n    if (this.toggled && this.currentValue < 0) {\n      this.currentValue = 0;\n      this.toggled = false;\n      this.object[this.property] = this.value1;\n    }\n  },\n\n  // In case I want to use dots to access sub properties\n  setProp: function setProp(value) {\n    var path = this.property.split('.');\n    var object = this.object;\n    for (var i = 0; i < path.length - 1; i++) {\n      console.log(path[i]);\n      object = object[path[i]];\n    }\n    object[path[path.length - 1]] = value;\n  }\n\n};\n\nexports.default = ToggleEffector;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/ToggleEffector.js\n// module id = 9\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/ToggleEffector.js?")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar TransformEffector = function TransformEffector(element, bandIndex, speed, factors) {\n  this.enabled = false;\n  this.element = element;\n  this.bandIndex = bandIndex;\n  this.speed = speed;\n  this.factors = {\n    x: factors.x || 0,\n    y: factors.y || 0,\n    z: factors.z || 0,\n    rx: factors.rx || 0,\n    ry: factors.ry || 0,\n    rz: factors.rz || 0,\n    sx: factors.sx || 0,\n    sy: factors.sy || 0,\n    sz: factors.sz || 0\n  };\n  this.originals = {\n    x: 0,\n    y: 0,\n    z: 0,\n    rx: 0,\n    ry: 0,\n    rz: 0,\n    sx: 1,\n    sy: 1,\n    sz: 1\n  };\n  this.current = {\n    x: 0,\n    y: 0,\n    z: 0,\n    rx: 0,\n    ry: 0,\n    rz: 0,\n    sx: 1,\n    sy: 1,\n    sz: 1\n  };\n};\n\nTransformEffector.prototype = {\n  update: function update(dataBeat, dataBands) {\n    var i = 0;\n    for (i in this.originals) {\n      // If we have a beat\n      if (dataBeat[this.bandIndex] && dataBeat[this.bandIndex] > 0) {\n        //\n        this.current[i] = this.biggest(this.current[i], this.originals[i] + this.factors[i] * dataBeat[this.bandIndex], this.factors[i]);\n      }\n      this.current[i] = this.biggest(this.current[i], this.originals[i] + this.factors[i] * 0.3 * dataBands[this.bandIndex], this.factors[i]);\n    }\n    // Update the UI\n    this.element.style.transform = "translate3d(" + this.current.x + "px, " + this.current.y + "px, " + this.current.z + "px)" + "scaleX(" + this.current.sx + ") " + "scaleY(" + this.current.sy + ") " + "scaleZ(" + this.current.sz + ") " + "rotate3d(1, 0, 0, " + this.current.rx + "deg) " + "rotate3d(0, 1, 0, " + this.current.ry + "deg) " + "rotate3d(0, 0, 1, " + this.current.rz + "deg) ";\n    // "rotateX(" + this.current.rx + "deg) " +\n    // "rotateY(" + this.current.ry + "deg) " +\n    // "rotateZ(" + this.current.rz + "deg) ";\n    // Let the values fall back.\n    for (i in this.originals) {\n      this.current[i] -= (this.current[i] - this.originals[i]) * this.speed;\n      if (this.factors[i] > 0) {\n        if (this.current[i] < this.originals[i] + 0.01) {\n          this.current[i] = this.originals[i];\n        }\n      } else {\n        if (this.current[i] > this.originals[i] - 0.01) {\n          this.current[i] = this.originals[i];\n        }\n      }\n    }\n  },\n\n  biggest: function biggest(a, b, direction) {\n    if (direction > 0) return Math.max(a, b);\n    return Math.min(a, b);\n  }\n\n};\n\nexports.default = TransformEffector;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/TransformEffector.js\n// module id = 10\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/TransformEffector.js?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar TriangleDrawer = function TriangleDrawer(canvas, bandIndex) {\n  this.enabled = false;\n  this.canvas = canvas;\n  this.bandIndex = bandIndex;\n  this.factor = 0.5;\n  this.speed = 0.04;\n  this.ctx = canvas.getContext("2d");\n  this.original = 7.5;\n  this.currentValue = this.original;\n\n  this.video = document.getElementsByTagName("video")[0];\n  this.svg = document.getElementById("ytp-svg-28"); // not found\n  this.rect = this.video.getBoundingClientRect();\n\n  this.containedInVideo = false;\n  this.isCentered = true;\n  this.doMirror = false;\n  this.xOffset = ~~(Math.random() * window.innerWidth - this.rect.width / 2);\n  this.yOffset = ~~(Math.random() * window.innerHeight - this.rect.height / 2);\n  // console.log("{x:" + this.xOffset + ", y:" + this.yOffset + "},");\n};\n\nTriangleDrawer.prototype = {\n  update: function update(dataBeat, dataBands) {\n    if (dataBeat[this.bandIndex] && dataBeat[this.bandIndex] > 0) {\n      this.currentValue = Math.max(this.currentValue, this.original + this.factor * dataBeat[this.bandIndex]);\n    }\n    this.currentValue = Math.max(this.currentValue, this.original + this.factor * 0.5 * dataBands[this.bandIndex]);\n    // Don\'t update if we\'re already at zero\n    if (this.currentValue === 0) {\n      return;\n    }\n    // Don\'t spend to much time on a mini-triangle\n    if (this.currentValue < 0.001) {\n      this.currentValue = 0;\n    }\n\n    // Length of the sides of the triangle\n    var side = 6;\n    if (this.containedInVideo && side * this.currentValue > this.rect.height) {\n      this.currentValue = this.rect.height / side;\n    }\n\n    this.ctx.save();\n    // this.ctx.translate(this.canvas.width * 0.6, this.canvas.height/2);\n    this.ctx.translate(this.rect.left + this.rect.width * 0.5 + 3, this.rect.top + this.rect.height * 0.5);\n    if (!this.isCentered) {\n      this.ctx.translate(this.xOffset, this.yOffset);\n    }\n    if (this.doMirror) {\n      this.ctx.scale(-1, 1);\n    }\n    this.ctx.scale(this.currentValue, this.currentValue);\n    this.ctx.fillStyle = "white";\n    this.ctx.beginPath();\n    // Width of the triangle\n    var wt = side * Math.sin(Math.PI / 3);\n    this.ctx.moveTo(wt / 2, 0);\n    this.ctx.lineTo(-wt / 2, -side / 2);\n    this.ctx.lineTo(-wt / 2, side / 2);\n    // this.ctx.fill();\n    this.ctx.clip();\n    var w = this.rect.width / 60;\n    var h = this.rect.height / 60;\n\n    this.ctx.drawImage(this.video, -w / 2, -h / 2, w, h);\n\n    this.ctx.restore();\n\n    // The size is always falling back to it\'s original value\n    this.currentValue -= (this.currentValue - this.original) * this.speed;\n  }\n};\n\nexports.default = TriangleDrawer;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/TriangleDrawer.js\n// module id = 11\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/TriangleDrawer.js?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\n\nvar FallEffector = function FallEffector(element, bandIndex) {\n  this.enabled = false;\n  this.element = element;\n  this.bandIndex = bandIndex;\n\n  this.speed = 2;\n\n  this.originalRect = this.element.getBoundingClientRect();\n  this.currentY = this.originalRect.top;\n};\n\nFallEffector.prototype = {\n  update: function update(data) {\n    this.currentY += this.speed;\n    this.element.style.top = this.currentY + "px";\n  }\n};\n\nvar VideoFragmentsEffector = function VideoFragmentsEffector(element, bandIndex, factor) {\n  this.video = element;\n  this.bandIndex = bandIndex;\n\n  this.fragments = [];\n};\n\nVideoFragmentsEffector.prototype = {\n  update: function update(data) {\n    if (data[this.bandIndex] && data[this.bandIndex] > 10) {\n      console.log("createNewFragment");\n      this.createNewFragment();\n    }\n\n    for (var i = 0; i < this.fragments.length; i++) {\n      this.fragments[i].update(data);\n    }\n  },\n\n  createNewFragment: function createNewFragment() {\n\n    // This is the video size as it appear on the windows, HTML rendered\n    var rect = this.video.getBoundingClientRect();\n    // The scaling value to use for drawing on our canvas\n    var videoScaling = rect.width / this.video.videoHeight * devicePixelRatio;\n\n    var fragmentW = 130;\n    var fragmentH = fragmentW * this.video.videoHeight / this.video.videoWidth;\n    var fragmentX = Math.random() * (rect.width - fragmentW);\n    var fragmentY = Math.random() * (rect.height - fragmentH);\n\n    var canvas = document.createElement(\'canvas\');\n    canvas.width = fragmentW;\n    canvas.height = fragmentH;\n    canvas.style.display = "block";\n    canvas.style.position = "absolute";\n    canvas.style.left = rect.left + fragmentX + "px";\n    canvas.style.top = rect.top + fragmentY + "px";\n    canvas.style.zIndex = "10000000000"; // YouTube has some serious zIndex\n    canvas.style.pointerEvents = "none";\n    document.body.appendChild(canvas); // adds the canvas to the body element\n    var ctx = canvas.getContext("2d");\n\n    ctx.drawImage(this.video, fragmentX * videoScaling, fragmentY * videoScaling, fragmentW * videoScaling, fragmentH * videoScaling, 0, 0, canvas.width, canvas.height);\n\n    // Video playback\n    // var $this = this.video; //cache\n    // (function loop() {\n    //   if (!$this.paused && !$this.ended) {\n    //     ctx.drawImage($this,\n    //     fragmentX * videoScaling, fragmentY * videoScaling, fragmentW * videoScaling, fragmentH * videoScaling,\n    //     0, 0, canvas.width, canvas.height);\n    //     setTimeout(loop, 1000 / 30); // drawing at 30fps\n    //   }\n    // })();\n\n\n    this.fragments.push(new FallEffector(canvas, 0));\n  }\n\n};\n\nexports.default = VideoFragmentsEffector;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/VideoFragmentsEffector.js\n// module id = 12\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/VideoFragmentsEffector.js?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\n\nvar VideoOverlayEffector = function VideoOverlayEffector(element, bandIndex, factor) {\n  this.enabled = false;\n  this.video = element;\n  this.bandIndex = bandIndex;\n  this.factor = factor;\n\n  this.speed = 0.15;\n  this.original = 0.0;\n  this.currentValue = this.original;\n  this.affectAlpha = true; // managed by a ToggleEffector\n\n  // This is the video size as it appear on the windows, HTML rendered\n  this.rect = this.video.getBoundingClientRect();\n  // The scaling value to use for drawing on our canvas\n  this.videoScaling = this.rect.width / this.video.videoWidth;\n\n  var canvas = document.createElement(\'canvas\');\n  canvas.width = window.innerWidth;\n  canvas.height = window.innerHeight;\n  canvas.style.display = "block";\n  canvas.style.position = "absolute";\n  canvas.style.left = "0px";\n  canvas.style.top = "0px";\n  canvas.style.transformOrigin = // center the transform on the video\n  this.rect.left + this.rect.width / 2 + "px " + (this.rect.top + this.rect.height / 2) + "px ";\n  canvas.style.zIndex = "60";\n  canvas.style.pointerEvents = "none";\n  canvas.style.mixBlendMode = "color-dodge";\n\n  // mix-blend-mode: normal;\n  // mix-blend-mode: multiply; //darkens\n  // mix-blend-mode: screen; // lighten\n  // mix-blend-mode: overlay;\n  // mix-blend-mode: darken;\n  // mix-blend-mode: lighten;\n  // mix-blend-mode: color-dodge; // intensifies colors, works in bw\n  // mix-blend-mode: color-burn; // could work in 1 -, because darkens\n  // mix-blend-mode: hard-light;\n  // mix-blend-mode: soft-light;\n  // mix-blend-mode: difference; // goes black, BUT AMAZING EFFECT IF WITH BLUR OR DISPLACE !\n  // mix-blend-mode: exclusion; // invert light colors\n  // mix-blend-mode: hue; // nothing from here\n  // mix-blend-mode: saturation;\n  // mix-blend-mode: color;\n  // mix-blend-mode: luminosity;\n\n  // Add the canvas between the video and the player controls\n  var chrome = document.getElementsByClassName("ytp-chrome-top")[0];\n  chrome.parentNode.insertBefore(canvas, chrome.nextSibling);\n  var chromeRect = chrome.parentNode.getBoundingClientRect();\n  // document.body.appendChild(canvas);\n  canvas.style.position = "absolute";\n  canvas.style.left = -chromeRect.left + "px";\n  canvas.style.top = -chromeRect.top + "px";\n\n  this.canvas = canvas;\n  this.ctx = canvas.getContext("2d");\n  // this.ctx.rect(10, 10, 100, 100);\n  // this.ctx.fill();\n\n\n  this.ctx.filter = "blur(10px)";\n  this.drawOverlay();\n};\n\nVideoOverlayEffector.prototype = {\n\n  drawOverlay: function drawOverlay() {\n    // console.log(this.ctx.filter);\n    this.ctx.drawImage(this.video, 0, 0, this.video.videoWidth, this.video.videoHeight, this.rect.left, this.rect.top, this.rect.width, this.rect.height);\n  },\n\n  update: function update(data) {\n    // On a new data (beat or regular)\n    if (data[this.bandIndex] && data[this.bandIndex] > 0) {\n      this.currentValue = Math.max(this.currentValue, this.original + this.factor * data[this.bandIndex]);\n      if (this.currentValue > 1) {\n        this.currentValue = 1;\n      }\n    }\n    // Update the UI\n    this.canvas.style.opacity = this.affectAlpha ? this.currentValue : 1;\n    // The size is always falling back to it\'s original value\n    this.currentValue -= (this.currentValue - this.original) * this.speed;\n    if (this.currentValue < 0.002) {\n      this.currentValue = 0;\n    }\n\n    this.drawOverlay();\n  }\n\n};\n\nexports.default = VideoOverlayEffector;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/VideoOverlayEffector.js\n// module id = 13\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/VideoOverlayEffector.js?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar ZIndexEffector = function ZIndexEffector(element, bandIndex, zIndexes) {\n  this.enabled = false;\n  this.element = element;\n  this.bandIndex = bandIndex;\n  this.zIndexes = zIndexes;\n\n  this.speed = 0.1;\n  this.original = 0;\n  this.currentValue = this.original;\n};\n\nZIndexEffector.prototype = {\n  update: function update(data) {\n    // On a new data (beat or regular)\n    if (data[this.bandIndex] && data[this.bandIndex] > 0) {\n      this.currentValue = this.zIndexes.length - 10;\n    }\n    // Update the UI\n    this.element.style.zIndex = this.zIndexes[this.currentValue] - 1;\n    // The size is always falling back to it\'s original value\n    this.currentValue -= 1;\n    if (this.currentValue < 0) {\n      this.currentValue = 0;\n    }\n  }\n\n};\n\nexports.default = ZIndexEffector;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/ZIndexEffector.js\n// module id = 14\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/ZIndexEffector.js?')},function(module,exports,__webpack_require__){eval("module.exports = __webpack_require__(1);\n\n\n//////////////////\n// WEBPACK FOOTER\n// multi ./src/index.js\n// module id = 15\n// module chunks = 0\n\n//# sourceURL=webpack:///multi_./src/index.js?")}]);
